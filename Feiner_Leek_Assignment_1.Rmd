---
title: 'Assignment #1: Data and Statistical Exploration in R'
output: html_document
name: Christina Feiner-Leek
course: INF6490-Taylor Smith
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Instructions: 

In this assignment, you will be using the "COVID-19 Global Dataset" that is provided for you. You should load the dataset into this R environment, explore the data, perform data cleaning techniques to ensure that your data is ready for statistical analysis, and create three different visualizations of your choice based on your observations from the data. Following your exploration, analysis, and visualizations, you should compile a 1-page write-up detailing your research questions, data insights, and outputs. Both the write-up and the .Rmd file should be uploaded to Canvas.

Tips: 

1. Ensure that the .CSV file is in the correct directory before attempting to load it in. I would encourage you to explore how to change "setwd" or change your working directory in R.
2. Outside of R, you can open the .CSV in excel to manually explore the columns/data points in R. This can also be done in R once the dataset is imported.

---

Delve into the complexities of the COVID-19 pandemic by crafting one or more compelling research questions that align with your interests and contribute to our understanding of this global health crisis. Explore the vast array of topics and variables available within the dataset, from examining the effectiveness of public health measures to analyzing health disparities or investigating the economic impacts.

Formulate one or more research questions that spark your curiosity and drive your analysis. Consider these prompts as starting points:

1. Public Health Measures: How effective were lockdowns, social distancing, and mask mandates in controlling the spread of COVID-19? Were there disparities in the implementation or enforcement of these measures?

2. Health Disparities: Are there differences in COVID-19 outcomes (e.g., infection rates, mortality) among different population groups? How do factors such as age, race, ethnicity, socioeconomic status, and underlying health conditions influence these disparities?

3. Economic Impacts: What were the economic consequences of the COVID-19 pandemic, and how did different industries and sectors fare? How did government policies and stimulus measures affect the economy?

4. Mental Health: How did the pandemic impact mental health and well-being, both in individuals and communities? What strategies were effective in addressing mental health challenges during this time?

5. Long-Term Consequences: What are the long-term health consequences of COVID-19 infection, and how will they impact individuals and healthcare systems?

List your research question(s) below:

1.Did testing help reduce the number of serious or critical cases, and/or deaths?

---


Run the code block below to load in the required libraries.

```{r}

library(ggplot2) # visualization package
library(dplyr) # provides functions for summarizing and data manipulation
library(readr) # provides function for reading in data via .CSV file
library(janitor) # provides utility functions for data cleaning and manipulation
library(ggthemes) # provides a collection of themes for customizing the appearance of plots created with ggplot2

```


Load in the dataset. Fill in the missing code and run the code block below.

```{r}

(covid_data <- read.csv("covid_19_global.csv"))

```


Explore the data structure. Exploring the data structure is a crucial step in data analysis because it provides valuable information about the data that can help you make informed decisions about how to clean, preprocess, and analyze it. Fill in the missing code and run the code block below. Take note of some things that you notice here.

```{r}

head(covid_data)
summary(covid_data)
str(covid_data)

```


Check for missing values. Fill in the missing code and run the code block below.

```{r}

sum(is.na(covid_data))

```


If there are missing values in the dataset, handle them accordingly. One popular way to handle any missing values is through "list wise deletion." This removes any rows containing missing values. Fill in the missing code and run the code block below.

```{r}

covid_data <- na.omit(covid_data)

```


There are several numerical variables in the COVID-19 dataset. Choose one or more numerical variables that are relevant to your research question(s). For example, if you're interested in exploring the relationship between population density and COVID-19 case rates, you might choose the columns 'population' and 'total_cases_per_1m_population' to create two separate histograms.

Consider the following:

1. Bin Width - Adjust the bin width to get a clear and informative visualization. If the bin width is too small, the histogram may be too cluttered, and if it's too large, the distribution may be obscured.

2. Title and Labels - Use descriptive titles and labels for your plot.

3. Customization - Customize the appearance of your plot using ggplot2's aesthetics and themes.

Once you've selected your variables, create a histogram to visualize the distribution of one or more variables in the code block below. 

```{r}

hist(
  covid_data$total_tests_per_1m_population,
  main = "COVID-19: Tests per 1M Population",
  xlab = "Tests per 1 Million Population",
  col = "skyblue",
  border = "white"
)



```

---

Create three distinct visualizations to effectively communicate your findings and insights from the COVID-19 dataset. Consider the following visualization options:

1. Bar Charts
2. Line Charts
3. Scatter Plots
4. Box Plots
5. Geospatial Map

*Remember to choose visualizations that align with your research questions and provide meaningful insights. Experiment with different visualization types and customization options to create clear and engaging visuals.


Fill in the code blocks below to create your chosen visualizations.


Visualization #1

```{r}

ggplot(covid_data, aes(x = total_deaths_per_1m_population, y = total_tests_per_1m_population)) +
  geom_point(color = "firebrick", alpha = 0.6, size = 2) +
  geom_smooth(method = "lm", se = FALSE, color = "firebrick") +
  labs(
    title = "Tests per 1M vs Deaths per 1M",
    x = "Total Deaths per 1M",
    y = "Total Tests per 1M"
  ) +
  theme_minimal()

```


Visualization #2

```{r}
ggplot(covid_data, aes(x = serious_or_critical, y = total_tests_per_1m_population)) +
  geom_point(color = "darkorange", alpha = 0.6, size = 2) +
  geom_smooth(method = "lm", se = FALSE, color = "darkorange") +
  labs(
    title = "Tests per 1M vs Serious/Critical",
    x = "Total Serious/Critical",
    y = "Total Tests per 1M"
  ) +
  theme_minimal()



```


Visualization #3

```{r}
install.packages(c("ggplot2", "rnaturalearth", "rnaturalearthdata", "dplyr"))
library(ggplot2)
library(rnaturalearth)
library(rnaturalearthdata)
library(dplyr)
world <- ne_countries(scale = "medium", returnclass = "sf")
covid_continent <- covid_data %>%
  group_by(continent) %>%
  summarise(avg_tests_per_1m = mean(total_tests_per_1m_population, na.rm = TRUE))
world_continent <- world %>%
  group_by(continent) %>%
  summarise(geometry = sf::st_union(geometry)) %>%
  left_join(covid_continent, by = "continent")
ggplot(world_continent) +
  geom_sf(aes(fill = avg_tests_per_1m), color = "white") +
  scale_fill_viridis_c(option = "plasma", trans = "log10", na.value = "grey90") +
  labs(
    title = "COVID-19 Total Tests per 1M Population by Continent",
    fill = "Tests per 1M (avg)"
  ) +
  theme_minimal()


```